<!DOCTYPE html>
<html lang="en">

<head>
    <script src="/socket.io/socket.io.js"></script>
    
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Waiting</title>
</head>

<body>
    <div class="container">
        <h1>Waiting</h1>
        <div class="play-area">

        </div>
        <h2 id="winner"></h2>
        <!--<button onclick="reset_board()">RESET</button>-->
    </div>
    <!--<script src="tictactoe.js"></script>-->
    <script>
        
        let socket = io();

        socket.on('redirect', function(destination) {
            window.location.href = destination;
        });

        

        socket.on('test', function () {
            socket.emit('test', getId());
            console.log(getId());
        })

        socket.on('newPlayer', function (playerId) {
            if(getId() == "null"){
            document.cookie = "id =" + playerId + ";path=/";  
            }
            socket.emit("requestGame", getId());
        });

        function getId() {
            let returned = "null";
            try {
                returned = document.cookie
                    .split('; ')
                    .find(row => row.startsWith('id='))
                    .split('=')[1];
            }
            catch{
                
            }
            return returned;
        }


        
    </script>
</body>

</html>